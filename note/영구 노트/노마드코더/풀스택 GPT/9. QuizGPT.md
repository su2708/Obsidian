#fullstack #gpt #Nomad_Coder [[Fullstack GPT]]

## 9.1 WikipediaRetriever
### Wikipedia
- 다국어로 이루어진 무료 온라인 백과사전
- 위키피디언들이 참여하여 오픈 협업을 통해 작성되고 유지 보수되는 시스템인 MediaWiki 기반의 편집 시스템을 사용


---
## 9.4 Formatter Prompt
### Format을 지정하는 이유
- 특정 형식을 강제하여 일관된 프롬프트 구조를 유지할 수 있음
- LLM이 일관된 형식으로 응답을 하도록 유도할 수 있음
```python
questions_prompt = ChatPromptTemplate.from_messages([
    (
        "system",
        """
        You are a helpful assistant that is role playing as a teacher.
        
        Based ONLY on the following context make 10 questions to test the user's knowledge about the text.
        
        Each question should have 4 answers, three of them must be incorrect and one should be correct.
        
        Use (o) to signal the correct answer.
        
        Question examples:
        
        Question: What is the color of the ocean?
        Answers: Red | Yellow | Green | Blue(o)
        
        Your turn!
        
        Context: {context}
        """
    )
])

questions_chain = {
    "context": format_docs
} | questions_prompt | llm

formatting_prompt = ChatPromptTemplate.from_messages([
    (
        "system",
        """
        You are a powerful formatting algorithm.

        You format exam questions into JSON format.
        Answers with (o) are the correct ones.

        Example Input:
        Question: What is the color of the ocean?
        Answers: Red|Yellow|Green|Blue(o)

        Example Output:

        ```json
		{{
			"question": "What is the color of the ocean?",
			"answers": [
				{{
					"answer": "Red",
					"correct": false
				}},
				{{
					"answer": "Yellow",
					"correct": false
				}},
				{{
					"answer": "Green",
					"correct": false
				}},
				{{
					"answer": "Blue",
					"correct": true
				}},
			]
		}}
        ```
        Your turn!
        Questions: {context}
        """,
    )
])

formatting_chain = formatting_prompt | llm
```

### {}와 {{}}의 차이
- {}: prompt에 어떤 값을 주입하고 싶을 때 사용
- {{}}: prompt에서 format 하지 않았으면 하는 부분들을 지정할 때 사용


---
## 9.5 Output Parser
### Output Parser의 역할
1. LLM 응답을 특정 포맷으로 변환
	- LLM은 기본적으로 String 형태로 출력을 제공
	- String이 아닌 JSON, Python 객체, 리스트, 숫자 등 원하는 데이터 구조로 변환할 때 사용

2. 응답을 정제 및 후처리
	- LLM의 응답이 불완전하거나 불필요한 정보를 포함할 수 있음
	- Output Parser는 이를 정리하여 필요한 데이터만 추출하는 역할을 수행

3. 안정성 확보
	- API 연동, 데이터 저장 등에서 일관된 포맷을 데이터가 필요할 때 유용함
	- LLM이 예상치 못한 출력을 내는 경우를 방지


---
